<head>
	<title>Letter test</title>
	<!--link rel="stylesheet" type="text/css" href="//maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css"-->
	<link rel="stylesheet" type="text/css" href="css/font-awesome.min.css">
	<link rel="stylesheet" type="text/css" href="css/editor.css">
	<meta charset="utf-8" />
</head>
<body>
	<div class="panel" id="layers">
		<label>
			<span class="title">Layers</span>
			<a class="toggle"></a>
		</label>
		<ul class="main">
			<li>
				&nbsp;&nbsp; Loading …
			</li>
		</ul>
	</div>

	<template id="layer-panel-item">
		<li class="layer<% if(hidden) { %> hidden<% } %>" id="layer-<%= id %>">
			<a class="visible fa"></a>
			<span class="name" title="(id #<%= id %>)"><%= name %></span>
			<% if(hasChildren){ %><a class="toggleGroup icon fa fa-caret-down"></a><% } %>
		</li>
	</template>

	<div class="panel" id="keyframes">
		<label>
			<span class="title">Animations</span>
			<a class="toggle"></a>
		</label>
		<ul class="description">
			<li>
				Current time: <time>0s</time>
				<input class="animate-btn" type="button" value="• add track" />
				<output></output>
			</li>
		</ul>
		<ul class="main">
			<li class="timeline">
				<p>Waiting for animations …</p>
			</li>
		</ul>
	</div>

	<template id="keyframe-panel-item">
		<li class="item open">
			<span class="name"><%= name %></span>
			<a class="toggleGroup icon fa fa-caret-down"></a>
			<ul>
				<% _.each(properties, function(keyframes, property) { %>
					<li class="timeline" data-property="<%= property %>">
						<label><%= property %></label>
						<div class="track">
						<% keyframes = new iteratableMap(keyframes); %>
							<div class="range" rel="prev" style="left:0; <%= _getRangeStyle(property, keyframes[0], type) %>"></div>
							<%
								_.each(keyframes, function(keyframe, index) { 
									currentKey  = keyframe.value;
									lastKey 	= keyframe.prev().value;
							%>
								<div class="keyframe<%= getTrigger(currentKey) %>" data-time="<%= currentKey.time %>" title="<%= currentKey.from || _.get(lastKey, 'to', currentKey.initValue) %>" style="left:<%= currentKey.time * TIME_FACTOR %>px;"></div>
								<div class="range" rel="<%= keyframe.isLast() ? 'last' : 'tween' %>" style="left:<%= currentKey.time * TIME_FACTOR %>px; <%= _getRangeStyle(property, keyframe, type) %>" title="<%= currentKey.name %> triggered by <%= currentKey.caller %>"></div>
							<% 	}); %>

							<div class="scrubber" style="left:0px"></div>
							<label class="time" style="left:<%= maxDuration * TIME_FACTOR %>px"><%= maxDuration %></label>
						</div>
					</li>
				<% }); %>
			</ul>
		</li>
	</template>

	<div class="panel" id="properties">
		<label>
			<span class="title">Properties</span><span class="type"></span>
			<a class="toggle"></a>
		</label>
		<ul class="main">
			<li><label>Waiting for a selection …</label></li>
		</ul>
	</div>

	<template id="property-panel-item">
		<li class="prop<%= keyed %>">
			<label><%= name %>
				<% if(name.match(/color$/gi)) { %>
					<input type="color" data-prop="<%= path %><%= name %>" value="<%= (new paper.Color(value)).toCSS(true) %>">
				<% }%>
			</label>
			<% switch(type) { 

				case Boolean: %>
				<input type="checkbox" data-prop="<%= path %><%= name %>" checked="<%= (value ? 'checked' : '') %>">
			<% 		break; 

				case String:
					if(allowedValues) { 
			%>
				<select data-prop="<%= path %><%= name %>">
					<% _.each(allowedValues, function(aValue) { %>
						<option><%= aValue %></option>
					<% }); %>
				</select>
			<%		} else { 
			%>
						<input type="text" data-prop="<%= path %><%= name %>" value="<%= value %>">
			<%		} 
					break; 

				case 'elements': 
				case 'group': 
			%>
				<a class="toggleGroup icon fa fa-caret-down"></a>
			<% 		break; 
			
				default: 
			%>
				<input type="number" data-prop="<%= path %><%= name %>" value="<%= value %>" min="<%= range[0] %>" max="<%= range[1] %>" step="<%= step %>" title="<%= keyed.split(' ').join(' and ') %>">
			<% 		break;
			} %>
		</li>
	</template>

	<div class="panel" id="audio">
		<label>
			<span class="title">Audio</span>
			<a class="toggle"></a>
		</label>
		<ul class="main">
			<li><label>Waiting for a sound …</label></li>
		</ul>
	</div>

	<template id="audio-panel-item">
		<li class="audio" id="<%= id %>" title="<%= name %>">
			<label><%= name %></label>
		</li>
	</template>

	<canvas id="mainCanvas" resize></canvas>
	<div id="dummy"></div>
	<!--script src="https://cdnjs.cloudflare.com/ajax/libs/lodash.js/4.17.4/lodash.js"></script!-->
	<!--script src="https://cdnjs.cloudflare.com/ajax/libs/howler/2.0.3/howler.core.min.js"></script!-->

	<script src="js/wavesurfer.min.js"></script>

	<script src="js/js-md5.js"></script>
	<script src="js/lodash.js"></script>
	<script src="js/jquery-1.11.3.min.js"></script>
	<script src="js/jquery-ui.min.js"></script>
	<script src="js/howler.core.min.js"></script>
	<script src="js/paper-full.min.js"></script>
	<script src="js/undo.js" type="text/javascript"></script>
	<script src="js/engine.js" type="text/javascript"></script>
	<script src="js/editor.js" type="text/javascript"></script>
	<script src="js/geometrics.js" type="text/javascript"></script>
	<script src="js/easing.js" type="text/javascript"></script>
	<script src="games/strokes/strokes.js" type="text/javascript"></script>
	<!-- <script src="games/strokes/levels/tuby.js" type="text/paperscript" canvas="mainCanvas"></script> -->
	<script src="games/bearBriefing.js" type="text/paperscript" canvas="mainCanvas"></script>
	<script type="text/javascript"></script>
</body>