/*! polygoat v0.0.1 2017-06-17 */

Game=function(a,b,c,d){var e=this;e.name=b,e.type=c.type,e.file="games/"+e.type+"/"+b+".svg",e.project=a,e.options=c||{},e.files={"ani.json":{name:"untitled.json",loaded:!1,saved:!1}},e.symbols=[],e.reset=function(){this.dragging=!1},e._resolveFiles=function(a){var b={};switch(typeof a){case"object":return _.isArray(a)?_.merge.apply(_,_.map(a,e._resolveFiles)):a;case"string":var c=a.match(/\.([a-zA-Z0-9]{2,5})$/g);if(c)return b[c[0].slice(1)]={path:a,saved:!0,loaded:!1},b;if(a.match(/<svg.*>/g))return{svg:{content:a,saved:!0,loaded:!0}};if(a.match(/\n/g))return{js:{content:a,saved:!0,loaded:!0}}}return!1};var f;return e.onResize=function(a){f&&f(a)},e.load=function(g){(g=e._resolveFiles(g))&&(_.extend(_.get(e,"files",{}),g),g.svg&&(a.clear(),a.view.update(),a.importSVG(g.svg.content||g.svg.path,{expandShapes:!0,onLoad:function(){g.svg.loaded=!0,e.scene=this,e.container=this.item,(f=function(b){var c=new paper.Point(b.size).multiply(.5),d=new paper.Point(e.container.bounds.size).multiply(.5).add(a.view.bounds.point);e.container.position=paper.Point.max(c,d)})({size:a.view.viewSize}),e.scene.UI&&_.each(e.scene.UI.item.children,function(a){a.visible=!1});try{d&&d(e.scene,e.container,e),Game.onLoad&&Game.onLoad.call(e,a,b,c),console.log("%c SVG loaded ","background-color:#444; color:#CCC",g.svg)}catch(a){console.error("Game could not be properly initialized. %c "+a+" ","background-color:red; color: #fff;")}}})),g.js&&(g.js.path?jQuery.getScript({url:g.js.path,dataType:"script",success:function(){g.js.loaded=!0,console.log("success! arguments",arguments,g)}}):($("<script>"+g.js.content+"<\/script>").appendTo("body"),g.js.loaded=!0)))},e.load(e.file),this};
//# sourceMappingURL=game.min.js.map