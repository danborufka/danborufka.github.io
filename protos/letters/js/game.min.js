/*! polygoat v0.0.1 2017-06-09 */

Game=function(a,b,c,d){var e=this;e.name=b,e.type=c.type,e.file="games/"+e.type+"/"+b+".svg",e.project=a,e.options=c||{},e.files={"ani.json":{name:"untitled.json",saved:!1}},e.symbols=[],e.reset=function(){this.dragging=!1},e._resolveFiles=function(a){var b={};switch(typeof a){case"object":return _.isArray(a)?_.merge.apply(_,_.map(a,e._resolveFiles)):a;case"string":var c=a.match(/\.([^\.]{2,5})$/g);if(c)return b[c[0].slice(1)]={path:a,saved:!0},b;if(a.match(/<svg.*>/g))return{svg:{content:a,saved:!0}};if(a.match(/\n/g))return{js:{content:a,saved:!0}}}return!1};var f;e.onResize=function(a){f&&f(a)};var g=!0;return e.load=function(h){(h=e._resolveFiles(h))&&(e.files=_.extend(_.get(e,"files",{}),h),h.svg&&(a.clear(),a.view.update(),a.importSVG(h.svg.content||h.svg.path,{expandShapes:!0,onLoad:function(){e.scene=this,e.container=this.item,(f=function(b){var c=new paper.Point(b.size).multiply(.5),d=new paper.Point(e.container.bounds.size).multiply(.5).add(a.view.bounds.point);e.container.position=paper.Point.max(c,d),g&&(g.remove&&g.remove(),g=new paper.Shape.Rectangle(e.container.bounds),g.strokeColor="crimson",g.strokeWidth=1,g.dashArray=[2,2])})({size:a.view.viewSize});try{d&&d(e.scene,e.container,e),Game.onLoad&&Game.onLoad.call(e,a,b,c),console.log("%c SVG loaded ","background-color:#444; color:#CCC",h.svg)}catch(a){console.error("Game could not be properly initialized. %c "+a+" ","background-color:red; color: #fff;")}}})),h.js&&(console.log("files.js",h.js),jQuery.ajax({url:h.js,dataType:"script",success:function(){console.log("success! arguments",arguments)},async:!0})))},e.load(e.file),this};
//# sourceMappingURL=game.min.js.map